<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© - Ø¬Ø§Ù…Ø¹Ø© Ø´Ù‚Ø±Ø§Ø¡</title>
    <link rel="stylesheet" href="login-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="login-container">
        <!-- Background Animation -->
        <div class="background-animation">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
            <div class="floating-shape shape-4"></div>
        </div>

        <!-- Login Card -->
        <div class="login-card">
            <!-- University Header -->
            <div class="university-header">
                <img src="logo.jpg" alt="Ø´Ø¹Ø§Ø± Ø¬Ø§Ù…Ø¹Ø© Ø´Ù‚Ø±Ø§Ø¡" class="university-logo">
                <div class="university-info">
                    <h1>Ø¬Ø§Ù…Ø¹Ø© Ø´Ù‚Ø±Ø§Ø¡</h1>
                    <p>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©</p>
                </div>
            </div>

            <!-- Login Form -->
            <form class="login-form" id="loginForm">
                <div class="form-header">
                    <h2><i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                    <p>Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</p>
                </div>

                <div class="form-group">
                    <label for="studentId">
                        <i class="fas fa-id-card"></i>
                        Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© / Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
                    </label>
                    <input 
                        type="text" 
                        id="studentId" 
                        name="studentId" 
                        placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"
                        required
                        autocomplete="username"
                    >
                    <div class="input-border"></div>
                </div>

                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i>
                        ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                    </label>
                    <div class="password-input">
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                            required
                            autocomplete="current-password"
                        >
                        <button type="button" class="toggle-password" onclick="togglePassword()">
                            <i class="fas fa-eye" id="passwordToggleIcon"></i>
                        </button>
                    </div>
                    <div class="input-border"></div>
                </div>

                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox" id="rememberMe" name="rememberMe">
                        <span class="checkmark"></span>
                        ØªØ°ÙƒØ±Ù†ÙŠ
                    </label>
                    <a href="#" class="forgot-password">Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ</a>
                </div>

                <button type="submit" class="login-btn" id="loginBtn">
                    <span class="btn-text">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
                    <span class="btn-loader" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </span>
                </button>

                <div class="form-footer">
                    <div class="help-links">
                        <a href="#" class="help-link">
                            <i class="fas fa-question-circle"></i>
                            Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                        </a>
                        <a href="#" class="help-link">
                            <i class="fas fa-phone"></i>
                            Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ
                        </a>
                    </div>
                </div>
            </form>

            <!-- Error Message -->
            <div class="error-message" id="errorMessage" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorText"></span>
            </div>

            <!-- Success Message -->
            <div class="success-message" id="successMessage" style="display: none;">
                <i class="fas fa-check-circle"></i>
                <span>ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡...</span>
            </div>
        </div>

        <!-- Footer -->
        <div class="login-footer">
            <div class="footer-content">
                <p>&copy; 2025 Ø¬Ø§Ù…Ø¹Ø© Ø´Ù‚Ø±Ø§Ø¡. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
                <div class="footer-links">
                    <a href="#">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ</a>
                    <a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                    <a href="#">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>
                </div>
            </div>
        </div>
    </div>

    <script src="login-script-fixed.js">

</script>
    <!-- START: Ø²Ø± "ØªÙ‚Ø¯ÙŠÙ… Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯" + Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„ÙƒØ§Ù…Ù„ (Ø§Ù„ØµÙ‚ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ù‚Ø¨Ù„ </body>) -->
<style>
/* scoped styles â€” Ù„Ø§ ØªØºÙŠØ± Ø£Ù„ÙˆØ§Ù† ØµÙØ­ØªÙƒ Ø§Ù„Ø¹Ø§Ù…Ø© */
#applicantBtn {
  display:block;
  width:100%;
  margin-top:12px;
  padding:10px 12px;
  border-radius:8px;
  font-weight:800;
  cursor:pointer;
  background:#0b7a36; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ù…Ù†Ø§Ø³Ø¨ â€” ÙŠÙ†Ø³Ø¬Ù… Ù…Ø¹ ØµÙØ­ØªÙƒ */
  color:#fff;
  border:0;
  box-sizing:border-box;
}
#appDrawerWrapper { transition: all .36s ease; max-height:0; overflow:hidden; opacity:0; transform: translateY(-8px); }
#appDrawerWrapper.open { max-height:4000px; opacity:1; transform: translateY(0); margin-top:14px; }

/* Form layout - 2-column wide */
.app-form {
  background:#fff;
  border:1px solid rgba(0,0,0,0.05);
  border-radius:10px;
  padding:18px;
  box-shadow:0 6px 20px rgba(15,23,42,0.04);
  box-sizing:border-box;
  font-family: inherit;
}
.app-form .grid { display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:start; }
.app-form .full { grid-column: 1 / -1; }
.app-form label { display:block; font-weight:800; margin-bottom:6px; font-size:14px; }
.app-form input[type=text], .app-form input[type=email], .app-form input[type=tel], .app-form input[type=date], .app-form input[type=number], .app-form select, .app-form textarea {
  width:100%; padding:11px; border:1px solid #e6e9ef; border-radius:8px; font-size:15px; box-sizing:border-box;
}
.app-form textarea { min-height:110px; resize:vertical; font-size:14px; }

/* sections */
.app-form .section { border-top:1px dashed #e6e9ef; padding-top:12px; margin-top:8px; font-weight:900; color:#0b7a36; }

/* buttons */
.app-form .row-actions { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.app-form .btn { padding:10px 14px; border-radius:8px; cursor:pointer; border:0; font-weight:800; }
.app-form .btn.primary { background:#0b5fff; color:#fff; }
.app-form .btn.gray { background:#6b7280; color:#fff; }
.app-form .copyBtn { padding:8px 10px; border-radius:6px; border:1px solid rgba(0,0,0,0.06); background:#f3f4f6; cursor:pointer; font-weight:700; }

.app-form .note { background:#fffbea; padding:10px; border-left:4px solid #f59e0b; border-radius:8px; font-size:13px; }
.app-form .small { font-size:13px; color:#6b7280; margin-top:6px; }

/* responsive */
@media (max-width:980px) {
  .app-form .grid { grid-template-columns: 1fr; }
}
</style>

<script>
(function(){
  const FORMCARRY_URL = 'https://formcarry.com/s/ON8xkE-353d'; // Ø§Ø¨Ù‚ÙŠÙ‡ ÙƒÙ…Ø§ Ù‡Ùˆ Ø£Ùˆ ØºÙŠÙ‘Ø±ÙŠ Ø­Ø³Ø¨ Ø­Ø§Ø¬ØªÙƒ
  const IBAN = 'SA4080000859608017979448'; // Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø°ÙŠ Ø·Ù„Ø¨ØªÙŠÙ‡

  // Wait DOM ready
  function ready(fn){ if (document.readyState!='loading') return fn(); document.addEventListener('DOMContentLoaded', fn); }

  ready(()=>{
    // find login form area and login button to insert our button under it
    const loginForm = document.querySelector('.login-form') || document.getElementById('loginForm') || document.querySelector('.login-card') || document.querySelector('.login-card .login-form');
    const loginBtn = document.getElementById('loginBtn') || document.querySelector('.login-btn') || (loginForm ? loginForm.querySelector('button[type="submit"], button') : null);

    // build button
    const btn = document.createElement('button');
    btn.id = 'applicantBtn';
    btn.type = 'button';
    btn.textContent = 'ØªÙ‚Ø¯ÙŠÙ… Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ / New Student Application';

    // insert button below loginBtn if found, otherwise append into login-card
    if (loginBtn && loginBtn.parentElement) {
      loginBtn.insertAdjacentElement('afterend', btn);
    } else {
      const container = document.querySelector('.login-card') || document.querySelector('.login-container') || document.body;
      container.appendChild(btn);
    }

    // build drawer HTML only once
    const drawerWrapper = document.createElement('div');
    drawerWrapper.id = 'appDrawerWrapper';
    drawerWrapper.innerHTML = `
      <div class="app-form" role="region" aria-label="Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚Ø¯ÙŠÙ… Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯">
        <form id="applicantForm" class="grid" enctype="multipart/form-data" novalidate>
          <input type="hidden" name="_source" value="university_shaqra_application">
          <div class="full" style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
            <div>
              <h2 style="margin:0">ğŸ›ï¸ Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚Ø¯ÙŠÙ… Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ â€” Ø¬Ø§Ù…Ø¹Ø© Ø´Ù‚Ø±Ø§Ø¡</h2>
              <div class="small">Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø¯Ù‚Ø©. Fields in Arabic & English.</div>
            </div>
            <button type="button" id="closeAppForm" class="btn gray" style="margin-left:12px">Ø¥ØºÙ„Ø§Ù‚</button>
          </div>

          <!-- Personal & Address & Academic & Others - 2 columns wide grid -->
          <div class="section full">1. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© / Basic information</div>

          <div>
            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©) / Full name (Arabic) <span style="color:#b91c1c">*</span></label>
            <input name="fullNameAr" required>
          </div>
          <div>
            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©) / Full name (English) <span style="color:#b91c1c">*</span></label>
            <input name="fullNameEn" required>
          </div>

          <div>
            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ / First name</label>
            <input name="firstName">
          </div>
          <div>
            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ / Second name</label>
            <input name="secondName">
          </div>

          <div>
            <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© / Family name</label>
            <input name="familyName">
          </div>
          <div>
            <label>Ø§Ø³Ù… Ø§Ù„Ø£Ù… / Mother's name</label>
            <input name="motherName">
          </div>

          <div>
            <label>Ù†ÙˆØ¹ Ø§Ù„Ù‡ÙˆÙŠØ© / ID type <span style="color:#b91c1c">*</span></label>
            <select name="idType" required>
              <option value="">Ø§Ø®ØªØ± / Choose...</option>
              <option value="national">Ù‡ÙˆÙŠØ© ÙˆØ·Ù†ÙŠØ© / National ID</option>
              <option value="iqama">Ø¥Ù‚Ø§Ù…Ø© / Iqama</option>
              <option value="passport">Ø¬ÙˆØ§Ø² Ø³ÙØ± / Passport</option>
            </select>
          </div>
          <div>
            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© / ID number <span style="color:#b91c1c">*</span></label>
            <input name="idNumber" required>
          </div>

          <div>
            <label>Ù…ÙƒØ§Ù† Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù‡ÙˆÙŠØ© / Place of issue</label>
            <input name="idPlace">
          </div>
          <div>
            <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ / Date of birth <span style="color:#b91c1c">*</span></label>
            <input type="date" name="birthDate" required>
          </div>

          <div>
            <label>Ø§Ù„Ø¬Ù†Ø³ / Gender <span style="color:#b91c1c">*</span></label>
            <select name="gender" required>
              <option value="">Ø§Ø®ØªØ± / Choose...</option>
              <option value="male">Ø°ÙƒØ± / Male</option>
              <option value="female">Ø£Ù†Ø«Ù‰ / Female</option>
              <option value="other">Ø£Ø®Ø±Ù‰ / Other</option>
            </select>
          </div>
          <div>
            <label>Ø§Ù„Ø¬Ù†Ø³ÙŠØ© / Nationality <span style="color:#b91c1c">*</span></label>
            <input name="nationality" required placeholder="Ù…Ø«Ø§Ù„: Ø³Ø¹ÙˆØ¯ÙŠ / Example: Saudi">
          </div>

          <div>
            <label>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© / Marital status</label>
            <select name="maritalStatus">
              <option value="">Ø§Ø®ØªØ± / Choose...</option>
              <option value="single">Ø£Ø¹Ø²Ø¨/Ø¹Ø²Ø¨Ø§Ø¡ / Single</option>
              <option value="married">Ù…ØªØ²ÙˆØ¬/Ù…ØªØ²ÙˆØ¬Ø© / Married</option>
              <option value="divorced">Ù…Ø·Ù„Ù‚/Ù…Ø·Ù„Ù‚Ø© / Divorced</option>
              <option value="widowed">Ø£Ø±Ù…Ù„/Ø£Ø±Ù…Ù„Ø© / Widowed</option>
            </select>
          </div>
          <div>
            <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ / Mobile number <span style="color:#b91c1c">*</span></label>
            <input name="phone" type="tel" required placeholder="+9665xxxxxxx">
          </div>

          <div>
            <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ / Email <span style="color:#b91c1c">*</span></label>
            <input name="email" type="email" required placeholder="example@mail.com">
          </div>
          <div>
            <label>ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ© (Ù…Ø±ÙÙ‚) / Personal photo (attachment)</label>
            <input type="file" name="photo" accept="image/*">
            <div class="small">ÙŠÙØ¶Ù„ ØµÙˆØ±Ø© Ø­Ø¯ÙŠØ«Ø© Ø¨Ø®Ù„ÙÙŠØ© ÙˆØ§Ø¶Ø­Ø©. / Prefer recent clear photo.</div>
          </div>

          <div class="section full">2. Ø§Ù„Ø¹Ù†ÙˆØ§Ù† / Address</div>

          <div>
            <label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© / Province</label>
            <input name="region">
          </div>
          <div>
            <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© / City</label>
            <input name="city">
          </div>

          <div>
            <label>Ø§Ù„Ø­ÙŠ / Street</label>
            <input name="district">
          </div>
          <div>
            <label>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ / Postal code</label>
            <input name="postalCode">
          </div>

          <div class="full">
            <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ·Ù†ÙŠ / Full address</label>
            <input name="address" placeholder="Ø´Ø§Ø±Ø¹ØŒ Ø­ÙŠØŒ Ù…Ù†Ø²Ù„ Ø±Ù‚Ù… / Street, district, house no.">
          </div>

          <div class="section full">3. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© / Academic information</div>

          <div>
            <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¤Ù‡Ù„ Ø§Ù„Ø£Ø®ÙŠØ± / Last qualification <span style="color:#b91c1c">*</span></label>
            <select name="lastQualification" required>
              <option value="">Ø§Ø®ØªØ± / Choose...</option>
              <option value="secondary">Ø«Ø§Ù†ÙˆÙŠØ© Ø¹Ø§Ù…Ø© / Secondary</option>
              <option value="diploma">Ø¯Ø¨Ù„ÙˆÙ… / Diploma</option>
              <option value="bachelor">Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³ / Bachelor</option>
              <option value="master">Ù…Ø§Ø¬Ø³ØªÙŠØ± / Master</option>
              <option value="phd">Ø¯ÙƒØªÙˆØ±Ø§Ù‡ / PhD</option>
            </select>
          </div>

          <div>
            <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© / Institution name <span style="color:#b91c1c">*</span></label>
            <input name="issuingInstitution" required>
          </div>

          <div>
            <label>Ø§Ù„Ø¨Ù„Ø¯ Ø§Ù„Ù…ØµØ¯Ø± Ù„Ù„Ø´Ù‡Ø§Ø¯Ø© / Country of issue <span style="color:#b91c1c">*</span></label>
            <input name="degreeCountry" required>
          </div>

          <div>
            <label>Ø§Ù„ØªØ®ØµØµ / Major</label>
            <input name="major">
          </div>

          <div>
            <label>Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬ / Graduation year <span style="color:#b91c1c">*</span></label>
            <input type="number" name="graduationYear" min="1900" max="2100" required>
          </div>

          <div>
            <label>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ®Ø±Ø¬ / Graduation date</label>
            <input type="date" name="graduationDate">
          </div>

          <div>
            <label>Ø§Ù„Ù…Ø¹Ø¯Ù„ / GPA or % <span style="color:#b91c1c">*</span></label>
            <input name="gpa" required placeholder="Ù…Ø«Ø§Ù„: 4.00 Ø£Ùˆ 92%">
          </div>

          <div>
            <label>Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… / Grading system</label>
            <select name="gradingSystem">
              <option value="">Ø§Ø®ØªØ± / Choose...</option>
              <option value="gpa">GPA</option>
              <option value="percentage">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© / Percentage</option>
            </select>
          </div>

          <div class="full">
            <label>Ù…Ø±ÙÙ‚Ø§Øª Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© ÙˆØ§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ (PDF/ØµÙˆØ±) / Certificates & transcript <span style="color:#b91c1c">*</span></label>
            <input type="file" name="certificates" accept="application/pdf,image/*" multiple required>
            <div class="small">Ø§Ø±ÙÙ‚ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªØ®Ø±Ø¬ ÙˆØ§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ. / Attach degree & transcript.</div>
          </div>

          <div class="section full">4. Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø¯Ø±Ø¬Ø§Øª / Tests & scores</div>

          <div>
            <label>Ù‚ÙŠØ§Ø³ (Qiyas) â€” Ù‡Ù„ Ù„Ø¯ÙŠÙƒØŸ / Do you have Qiyas?</label>
            <select name="hasQiyas"><option value="">Ø§Ø®ØªØ±</option><option value="no">Ù„Ø§ / No</option><option value="yes">Ù†Ø¹Ù… / Yes</option></select>
          </div>

          <div>
            <label>Ø±Ù‚Ù… Ø¬Ù„ÙˆØ³ Ù‚ÙŠØ§Ø³ / Qiyas seatno</label>
            <input name="qiyasNo">
          </div>

          <div>
            <label>Ø¯Ø±Ø¬Ø© Ù‚ÙŠØ§Ø³ / Qiyas score</label>
            <input name="qiyasScore" placeholder="Ù…Ø«Ø§Ù„: 85">
          </div>

          <div>
            <label>Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ â€” Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³ / Tahseeli seatno</label>
            <input name="tahseeliNo">
          </div>

          <div>
            <label>Ø¯Ø±Ø¬Ø© Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ / Tahseeli score</label>
            <input name="tahseeliScore">
          </div>

          <div class="full">
            <label>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù„ØºØ© â€” IELTS/TOEFL/STEP</label>
            <input name="englishTests" placeholder="Ù…Ø«Ø§Ù„: IELTS 6.0 â€” date">
          </div>

          <div class="full">
            <label>Ù…Ø±ÙÙ‚Ø§Øª Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª / Test results attachments</label>
            <input type="file" name="testsAttachments" accept="application/pdf,image/*" multiple>
          </div>

          <div class="section full">5. Ø±ØºØ¨Ø§Øª ÙˆØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© / Preferences</div>

          <div>
            <label>Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ / Program applied (required)</label>
            <input name="desiredProgram" required>
          </div>

          <div>
            <label>Ø§Ù„ÙƒÙ„ÙŠØ© / Faculty</label>
            <input name="desiredFaculty">
          </div>

          <div>
            <label>Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© / Study type <span style="color:#b91c1c">*</span></label>
            <select name="studyType" required>
              <option value="">Ø§Ø®ØªØ±</option><option value="regular">Ø§Ù†ØªØ¸Ø§Ù… / Regular</option><option value="distance">Ø¹Ù† Ø¨Ø¹Ø¯ / Distance</option><option value="affiliated">Ø§Ù†ØªØ³Ø§Ø¨ / Affiliated</option>
            </select>
          </div>

          <div>
            <label>Ø§Ù„ÙØ±Ø¹ / Campus preference</label>
            <input name="preferredCampus">
          </div>

          <div class="full">
            <label>Ø³Ø¨Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ / Motivation (optional)</label>
            <textarea name="motivation"></textarea>
          </div>

          <div class="section full">Ù…Ø±ÙÙ‚Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© / Additional documents</div>

          <div>
            <label>Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© (CV)</label>
            <input type="file" name="cv" accept="application/pdf">
          </div>
          <div>
            <label>Ø£ÙˆØ±Ø§Ù‚ Ù…Ù†Ø´ÙˆØ±Ø© / Publications</label>
            <input type="file" name="publications" accept="application/pdf,image/*" multiple>
          </div>

          <div class="full">
            <label>ØµÙˆØ±Ø© Ø§Ù„Ù‡ÙˆÙŠØ© Ø£Ùˆ Ù†Ø³Ø®Ø© Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© (Ù…Ø·Ù„ÙˆØ¨) / ID copy (required)</label>
            <input type="file" name="idAttachment" accept="application/pdf,image/*" required>
          </div>

          <div class="section full">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø®Ø§ØµØ© / Health</div>

          <div>
            <label>Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø§Ù„Ø§Øª ØµØ­ÙŠØ©ØŸ / Any medical conditions?</label>
            <select name="hasMedical"><option value="">Ø§Ø®ØªØ±</option><option value="no">Ù„Ø§ / No</option><option value="yes">Ù†Ø¹Ù… / Yes</option></select>
          </div>

          <div class="full">
            <label>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ© / Medical details</label>
            <textarea name="medicalDetails"></textarea>
          </div>

          <div class="section full">Ø§Ù„ØªÙˆØ§Ù‚ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ø¥Ù‚Ø±Ø§Ø±Ø§Øª / Declarations</div>

          <div class="full note">
            <strong>ØªÙ†Ø¨ÙŠÙ‡:</strong> Ø¨ØªÙˆÙ‚ÙŠØ¹Ùƒ (ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù…Ùƒ) ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ ØµØ­Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©. / By signing you confirm accuracy of information.
          </div>

          <div>
            <label>Ø§Ø³Ù… Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨ (Ù…Ø·Ø¨ÙˆØ¹) / Applicant name <span style="color:#b91c1c">*</span></label>
            <input name="declarantName" required>
          </div>

          <div>
            <label>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… / Application date <span style="color:#b91c1c">*</span></label>
            <input type="date" name="declarationDate" required>
          </div>

          <div class="full">
            <label>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„) / Electronic signature <span style="color:#b91c1c">*</span></label>
            <input name="electronicSignature" required placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
          </div>

          <div class="section full">Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ / Application fee</div>

          <div class="full" style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
            <div style="flex:1;min-width:240px">
              <label>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚ / Amount</label>
              <input name="feeAmount" value="1000" readonly>
            </div>
            <div style="flex:1;min-width:240px">
              <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ / Payment method</label>
              <input name="feeMethod" value="ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ - Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ / Bank transfer - Al Rajhi" readonly>
            </div>

            <div class="full" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
              <div style="flex:1">
                <p class="small" id="bankInfo">Ø§Ù„Ø¨Ù†Ùƒ: Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ â€” IBAN: <span id="ibanText">${IBAN}</span></p>
                <div class="small" id="paymentNote">Ø§Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ØŒ Ù†ÙÙ‘Ø° Ø§Ù„ØªØ­ÙˆÙŠÙ„ (1000 Ø±ÙŠØ§Ù„)ØŒ Ø«Ù… Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„ ÙÙŠ Ø­Ù‚Ù„ "ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¯ÙØ¹".</div>
              </div>
              <div>
                <button type="button" id="copyIbanBtn" class="copyBtn">Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</button>
              </div>
            </div>
          </div>

          <div class="full">
            <label>ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¯ÙØ¹ / Payment receipt (Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„)</label>
            <input type="file" name="paymentReceipt" accept="image/*,application/pdf">
            <div class="small">Ø¨Ø¹Ø¯ Ø¥ØªÙ…Ø§Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ù‡Ù†Ø§. ÙŠÙØ¶Ù„ PDF Ø£Ùˆ ØµÙˆØ±Ø© ÙˆØ§Ø¶Ø­Ø©.</div>
          </div>

          <div class="section full">Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØªÙ‚Ù†ÙŠØ©</div>
          <div class="full note">
            Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨" Ø³ÙŠÙØ±Ø³Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯. ØªØ£ÙƒØ¯ Ù…Ù† Ø±ÙØ¹ Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø¥Ù† ÙƒÙ†Øª Ù‚Ø¯ Ù†ÙØ°Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„.
          </div>

          <div class="full" style="display:flex;gap:8px;align-items:center;margin-top:12px;flex-wrap:wrap">
            <button type="button" id="downloadJsonBtn" class="copyBtn" style="background:#eef2ff">ØªØ­Ù…ÙŠÙ„ JSON</button>
            <button type="submit" id="sendAppBtn" class="btn primary" style="flex:1">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ / Submit Application</button>
            <button type="button" id="resetAppBtn" class="btn gray">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† / Reset</button>
            <div id="appFormMessage" style="flex:1"></div>
          </div>

        </form>
      </div>
    `;

    // append drawer after login-card or to login container
    const loginCard = document.querySelector('.login-card') || document.querySelector('.login-container') || document.body;
    loginCard.insertAdjacentElement('afterend', drawerWrapper);

    // event wiring
    const openBtn = btn;
    const closeBtn = drawerWrapper.querySelector('#closeAppForm');
    const copyIbanBtn = drawerWrapper.querySelector('#copyIbanBtn');
    const appForm = drawerWrapper.querySelector('#applicantForm');
    const downloadBtn = drawerWrapper.querySelector('#downloadJsonBtn');
    const resetBtn = drawerWrapper.querySelector('#resetAppBtn');
    const msgBox = drawerWrapper.querySelector('#appFormMessage');
    const paymentNote = drawerWrapper.querySelector('#paymentNote');

    function openDrawer(){
      drawerWrapper.classList.add('open');
      drawerWrapper.setAttribute('aria-hidden','false');
      openBtn.textContent = 'Ø¥ØºÙ„Ø§Ù‚ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… / Close Application Form';
      // default date
      const d = appForm.querySelector('[name="declarationDate"]');
      if(d && !d.value) d.value = new Date().toISOString().slice(0,10);
      drawerWrapper.scrollIntoView({behavior:'smooth', block:'nearest'});
    }
    function closeDrawer(){
      drawerWrapper.classList.remove('open');
      drawerWrapper.setAttribute('aria-hidden','true');
      openBtn.textContent = 'ØªÙ‚Ø¯ÙŠÙ… Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ / New Student Application';
      msgBox.innerHTML = '';
    }

    openBtn.addEventListener('click', ()=> {
      if (drawerWrapper.classList.contains('open')) closeDrawer(); else openDrawer();
    });
    closeBtn.addEventListener('click', closeDrawer);

    // copy IBAN
    copyIbanBtn.addEventListener('click', async ()=>{
      try {
        await navigator.clipboard.writeText(IBAN);
        copyIbanBtn.textContent = 'ØªÙ… Ø§Ù„Ù†Ø³Ø®';
        setTimeout(()=> copyIbanBtn.textContent = 'Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨', 1700);
      } catch(e){
        const ta = document.createElement('textarea'); ta.value = IBAN; document.body.appendChild(ta); ta.select();
        try { document.execCommand('copy'); copyIbanBtn.textContent = 'ØªÙ… Ø§Ù„Ù†Ø³Ø®'; setTimeout(()=> copyIbanBtn.textContent = 'Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨', 1700);} catch(err){ alert('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®: '+IBAN); }
        ta.remove();
      }
    });

    // simple fake-value detector
    function looksFake(v){
      if(!v) return true;
      const s = String(v).trim().toLowerCase();
      if(s.length <= 1) return true;
      const bad = ['test','123','aaaa','abcd','Ù…Ø«Ø§Ù„','Ù†Ù…ÙˆØ°Ø¬','xxx','0000','000'];
      if(bad.includes(s)) return true;
      return false;
    }

    // validation
    function validateAll(){
      const errors = [];
      // required fields list (matches form fields)
      const requiredNames = ['fullNameAr','fullNameEn','idType','idNumber','birthDate','gender','nationality','phone','email','lastQualification','issuingInstitution','degreeCountry','graduationYear','gpa','certificates','idAttachment','declarantName','declarationDate','electronicSignature','desiredProgram','studyType'];
      requiredNames.forEach(name=>{
        const el = appForm.elements[name];
        if(!el) return;
        if(el.type === 'file'){
          if(!el.files || el.files.length === 0) errors.push('Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨ Ù…ÙÙ‚ÙˆØ¯: ' + (el.previousElementSibling ? el.previousElementSibling.textContent.trim() : name));
        } else {
          if(looksFake(el.value)) errors.push('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ù‚ÙŠÙ…Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„Ø­Ù‚Ù„: ' + (el.previousElementSibling ? el.previousElementSibling.textContent.trim() : name));
        }
      });

      // email
      const email = appForm.elements['email'];
      if(email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) errors.push('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.');

      // phone
      const phone = appForm.elements['phone'];
      if(phone && !/^[+0-9\s\-]{7,18}$/.test(phone.value)) errors.push('Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± ØµØ­ÙŠØ­.');

      // idNumber basic
      const idnum = appForm.elements['idNumber'];
      if(idnum && !/^[0-9A-Za-z\-]{4,40}$/.test(idnum.value)) errors.push('Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©/Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©/Ø¬ÙˆØ§Ø² ÙŠØ¨Ø¯Ùˆ ØºÙŠØ± ØµØ§Ù„Ø­.');

      // graduation year
      const gy = appForm.elements['graduationYear'];
      if(gy && (isNaN(Number(gy.value)) || Number(gy.value) < 1900 || Number(gy.value) > 2100)) errors.push('Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.');

      return errors;
    }

    // download JSON action
    downloadBtn.addEventListener('click', ()=>{
      const fd = new FormData(appForm);
      const obj = {};
      for(const [k,v] of fd.entries()){
        if(obj[k] === undefined) obj[k] = v;
        else {
          if(!Array.isArray(obj[k])) obj[k] = [obj[k]];
          obj[k].push(v);
        }
      }
      // files metadata
      ['certificates','idAttachment','photo','cv','publications','testsAttachments','paymentReceipt'].forEach(name=>{
        obj[name] = [];
        const inp = appForm.elements[name];
        if(inp && inp.files){
          for(let i=0;i<inp.files.length;i++){
            const f = inp.files[i];
            obj[name].push({name:f.name,size:f.size,type:f.type});
          }
        }
      });
      obj._meta = {applicationId:'APP-'+Math.random().toString(36).slice(2,10).toUpperCase(), timestamp: new Date().toISOString()};
      const blob = new Blob([JSON.stringify(obj,null,2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      const fname = (appForm.elements['fullNameAr'] && appForm.elements['fullNameAr'].value ? appForm.elements['fullNameAr'].value.replace(/\s+/g,'_') : 'application') + '_shaqra.json';
      a.download = fname;
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(a.href);
    });

    // reset
    resetBtn.addEventListener('click', ()=>{
      if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ØŸ')) { appForm.reset(); msgBox.innerHTML=''; }
    });

    // submit handler
    appForm.addEventListener('submit', async (e)=>{
      e.preventDefault();
      msgBox.innerHTML = '';
      const errs = validateAll();
      if(errs.length){
        msgBox.innerHTML = '<div style="color:#b91c1c;font-size:13px;"><strong>ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªØ§Ù„ÙŠØ©:</strong><ul style="margin:6px 0 0 18px;padding:0">'+errs.map(x=>'<li>'+x+'</li>').join('')+'</ul></div>';
        drawerWrapper.scrollIntoView({behavior:'smooth', block:'nearest'});
        return;
      }

      const fd = new FormData(appForm);
      // meta
      fd.append('_meta_applicationId', 'APP-'+Math.random().toString(36).slice(2,10).toUpperCase());
      fd.append('_meta_timestamp', new Date().toISOString());
      fd.append('feeAmount','1000');
      fd.append('feeIban', IBAN);

      msgBox.innerHTML = '<div class="small">Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª... Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±.</div>';

      try {
        const res = await fetch(FORMCARRY_URL, { method:'POST', body: fd, headers:{ 'Accept':'application/json' } });
        if(!res.ok) throw new Error('HTTP '+res.status);
        msgBox.innerHTML = '<div style="color:#065f46;font-size:14px;">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­. Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ.</div>';
        setTimeout(()=>{ appForm.reset(); closeDrawer(); }, 900);
      } catch(err){
        console.error(err);
        msgBox.innerHTML = '<div style="color:#b91c1c;font-size:13px;">ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹.</div>';
      }
    });

    // close on ESC
    document.addEventListener('keydown', (ev)=> { if(ev.key === 'Escape' && drawerWrapper.classList.contains('open')) closeDrawer(); });

    // ensure initial closed
    closeDrawer();
  });
})();
</script>
<!-- END: Ø²Ø± "ØªÙ‚Ø¯ÙŠÙ… Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯" + Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„ÙƒØ§Ù…Ù„ -->
</body>
</html>

